<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Vijeta — Athlete Portal</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>tailwind.config={theme:{extend:{colors:{govnavy:"#0A1A3B",govorange:"#FF6A00"}}}};</script>
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/lucide@0.452.0/dist/umd/lucide.min.js"></script>
<style>
  html,body,#root{height:100%}
  .hero{position:relative;overflow:hidden;background:linear-gradient(135deg,#0A1A3B,#152a5f)}
  .hero:before{content:"";position:absolute;inset:0;opacity:.3;background:url('https://images.unsplash.com/photo-1546519638-68e109498ffc?q=80&w=1920&auto=format&fit=crop') center/cover}
</style>
</head>
<body class="bg-govnavy">
<div id="root"></div>
<script>
const e=React.createElement;
const TESTS=[
  {id:1,name:"Height",quality:"Anthropometry",time:"~1–2 min",setup:["Portrait camera","Back to wall","Read scale overlay"]},
  {id:2,name:"Weight",quality:"Anthropometry",time:"~1 min",setup:["Photo of scale","OCR digits","Face match"]},
  {id:3,name:"Sit & Reach",quality:"Flexibility",time:"~2–3 min",setup:["Side-on","Feet on box","Measure reach"]},
  {id:4,name:"Standing Vertical Jump",quality:"Explosive Strength (Lower)",time:"~2–3 min",setup:["Side-on","Mark reach","Apex minus reach"]},
  {id:5,name:"Standing Broad Jump",quality:"Explosive Strength (Lower)",time:"~2–3 min",setup:["Side-on","Tape from toes","Landing heels"]},
  {id:6,name:"Medicine Ball Throw",quality:"Strength (Upper)",time:"~2–3 min",setup:["45° angle","Baseline mark","First ground contact"]},
  {id:7,name:"30 m Standing Start",quality:"Speed",time:"~2–3 min",setup:["Cones 0–30m","Cam near finish","Start+finish detect"]},
  {id:8,name:"4 × 10 m Shuttle Run",quality:"Agility",time:"~3–4 min",setup:["Two lines 10m","Side-on","Line touches+time"]},
  {id:9,name:"Sit-ups (60s)",quality:"Core Strength",time:"~2–3 min",setup:["45° camera","Knees bent","Form checks"]},
  {id:10,name:"Endurance Run",quality:"Endurance",time:"~6–12 min",setup:["Track/GPS","U12:800m; 12+:1.6km","Timing"]}
];

function Nav({section,setSection,isAuthed,role,setRole,kyc,setKyc}){
  return e('div',{className:"sticky top-0 z-50 border-b border-white/10"},
    e('div',{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",style:{background:"#0A1A3B"}},
      e('div',{className:"text-2xl font-extrabold tracking-widest text-white"},"VIJETA"),
      e('div',{className:"hidden md:flex items-center gap-2 text-white"},
        ...["home","tests","results","leaderboard","resources"].map(k=>(
          e('button',{key:k,onClick:()=>setSection(k),
            className:`px-3 py-2 rounded-md text-sm font-semibold ${section===k?"bg-white/20":"bg-white/10 hover:bg-white/20"}`},
            k.toUpperCase())
        ))
      ),
      e('div',{className:"flex items-center gap-2"},
        isAuthed
          ? e('div',{className:"flex items-center gap-2"},
              e('span',{className:`px-3 py-2 rounded-md border ${role==='athlete'?"border-green-400 text-green-200":"border-white/20 text-white/80"}`},role==='athlete'?"Athlete":"Official"),
              e('span',{className:`px-3 py-2 rounded-md border ${kyc?"border-green-400 text-green-200":"border-amber-400 text-amber-200"}`},kyc?"KYC: Verified":"KYC: Not Verified"),
              !kyc && e('button',{onClick:()=>setKyc(true),className:"px-3 py-2 rounded-md text-white",style:{background:"#FF6A00"}},"Verify Aadhaar (demo)"),
              e('button',{onClick:()=>{setRole('athlete');localStorage.removeItem('ath_authed');location.reload();},
                className:"px-3 py-2 rounded-md bg-white/10 text-white/90 hover:bg-white/20"},"Logout")
            )
          : e('button',{onClick:()=>{localStorage.setItem('ath_authed','1'); location.reload();},
              className:"px-3 py-2 rounded-md text-white",style:{background:"#FF6A00"}},"Login / Sign up")
      )
    )
  );
}

function Hero({goTests}){
  return e('div',{className:"hero rounded-3xl shadow-xl text-white relative"},
    e('div',{className:"relative p-8 md:p-12 space-y-4"},
      e('div',{className:"text-4xl md:text-6xl font-extrabold tracking-wider"},"Vijeta — Athlete Portal"),
      e('p',{className:"text-lg md:text-2xl opacity-90"},"Record standardized fitness tests with on-device AI verification."),
      e('div',{className:"flex gap-3"},
        e('button',{onClick:goTests,className:"px-4 py-2 rounded-md text-white",style:{background:"#FF6A00"}},"Take a Test"),
        e('a',{href:"#resources",className:"px-4 py-2 rounded-md bg-white/10 text-white border border-white/30"},"Resources"))
    )
  );
}

function TestCard({t,start,how}){
  return e('div',{className:"bg-white rounded-xl p-4 hover:shadow-lg transition"},
    e('div',{className:"flex items-start justify-between"},
      e('div',null,
        e('div',{className:"font-bold"},t.name),
        e('div',{className:"text-slate-600 text-sm"},t.quality),
        e('div',{className:"text-slate-500 text-xs mt-1"},t.time)),
      e('i',{'data-lucide':'medal',className:"w-5 h-5 text-slate-500"})
    ),
    e('div',{className:"mt-3 flex gap-2"},
      e('button',{onClick:how,className:"px-3 py-2 rounded-md bg-slate-100"},"How to set up"),
      e('button',{onClick:start,className:"px-3 py-2 rounded-md text-white",style:{background:"#FF6A00"}},"Start"))
  );
}

function CameraMock({test}){
  const [status,setStatus]=React.useState('idle'); const [p,setP]=React.useState(0);
  const run=()=>{if(status==='recording')return; setStatus('recording'); setP(20);
    setTimeout(()=>setP(60),800); setTimeout(()=>{setStatus('processing'); setP(90)},1600);
    setTimeout(()=>{setStatus('done'); setP(100)},2300);}
  return e('div',{className:"bg-black/80 rounded-xl overflow-hidden aspect-[9/16] w-full relative"},
    e('div',{className:"absolute inset-0 grid place-items-center"},
      e('i',{'data-lucide':'camera',className:"w-16 h-16 text-white/60"}),
      e('div',{className:"absolute top-3 left-3 flex gap-2"},
        e('span',{className:"px-2 py-1 text-xs rounded-md bg-green-600/80 text-white"},"AI OK"),
        e('span',{className:"px-2 py-1 text-xs rounded-md bg-yellow-600/80 text-white"},"Lighting"),
        e('span',{className:"px-2 py-1 text-xs rounded-md bg-blue-600/80 text-white"},"Framing")),
      e('div',{className:"absolute bottom-3 left-3 right-3"},
        e('div',{className:"w-full h-2 bg-white/20 rounded-full overflow-hidden"},
          e('div',{className:"h-2 bg-white",style:{width:p+"%"}})),
        e('div',{className:"mt-3 flex gap-2"},
          e('button',{onClick:run,className:"px-4 py-2 rounded-md text-white",style:{background:"#FF6A00"}},status==='recording'?'Stop':'Start Test'),
          e('button',{onClick:()=>alert("Setup for "+test.name+"\n- "+test.setup.join("\n- ")), className:"px-4 py-2 rounded-md bg-slate-100"},"How to set up")),
        e('div',{className:"text-white/70 text-xs mt-2"},"Works offline. Only verified JSON is uploaded; video uploaded only if flagged/opt-in."))));
}

function Results(){
  return e('div',{className:"bg-white rounded-xl p-6 space-y-3"},
    e('div',{className:"text-xl font-bold"},"Result Summary"),
    e('div',{className:"grid md:grid-cols-3 gap-3"},
      e('div',{className:"bg-slate-50 rounded-lg p-4"},e('div',{className:"text-sm text-slate-600"},"Metric"),e('div',{className:"text-2xl font-extrabold"},"Jump Height: 43 cm")),
      e('div',{className:"bg-slate-50 rounded-lg p-4"},e('div',{className:"text-sm text-slate-600"},"Percentile (M • 14–15)"),e('div',{className:"text-2xl font-extrabold"},"82nd")),
      e('div',{className:"bg-slate-50 rounded-lg p-4"},e('div',{className:"text-sm text-slate-600"},"Badge"),e('div',{className:"text-2xl font-extrabold flex items-center gap-2"},e('i',{'data-lucide':'award',className:"w-6 h-6"}),"Explosive • Bronze"))),
    e('div',{className:"flex gap-2"},
      e('button',{className:"px-3 py-2 rounded-md bg-slate-100"},"Save offline"),
      e('button',{className:"px-3 py-2 rounded-md text-white",style:{background:"#FF6A00"}},"Sync when online"),
      e('button',{className:"px-3 py-2 rounded-md border"},"Retake")));
}

function Leaderboard(){
  const [state,setState]=React.useState("Delhi");
  const [district,setDistrict]=React.useState("New Delhi");
  const [gender,setGender]=React.useState("Male");
  const rows=[{rank:1,name:"A. Kumar",score:92,percentile:98,flagged:"No"},{rank:2,name:"R. Das",score:90,percentile:96,flagged:"No"},
              {rank:3,name:"S. Yadav",score:88,percentile:94,flagged:"Yes"},{rank:4,name:"K. Singh",score:86,percentile:92,flagged:"No"}];
  return e('div',{className:"bg-white rounded-xl p-6"},
    e('div',{className:"flex flex-wrap gap-3 mb-4"},
      e('select',{className:"px-3 py-2 rounded-md bg-slate-100",value:state,onChange:e=>setState(e.target.value)},
        e('option',null,"Delhi"),e('option',null,"Maharashtra"),e('option',null,"Odisha"),e('option',null,"Haryana")),
      e('select',{className:"px-3 py-2 rounded-md bg-slate-100",value:district,onChange:e=>setDistrict(e.target.value)},
        e('option',null,"New Delhi"),e('option',null,"South West"),e('option',null,"Pune"),e('option',null,"Bhubaneswar")),
      e('select',{className:"px-3 py-2 rounded-md bg-slate-100",value:gender,onChange:e=>setGender(e.target.value)},
        e('option',null,"Male"),e('option',null,"Female"))),
    e('div',{className:"text-xs text-slate-600 mb-2"},`Leaderboard — ${state} • ${district} • ${gender}`),
    e('div',{className:"overflow-x-auto"},
      e('table',{className:"min-w-full text-sm"},
        e('thead',{className:"text-left text-slate-600"},
          e('tr',null,e('th',{className:"py-2 pr-4"},"Rank"),e('th',{className:"py-2 pr-4"},"Athlete"),
            e('th',{className:"py-2 pr-4"},"Score"),e('th',{className:"py-2 pr-4"},"Percentile"),e('th',{className:"py-2 pr-0"},"Flag"))),
        e('tbody',null,rows.map(r=>e('tr',{key:r.rank,className:r.flagged==="Yes"?"bg-amber-50":""},
          e('td',{className:"py-2 pr-4"},r.rank),e('td',{className:"py-2 pr-4"},r.name),
          e('td',{className:"py-2 pr-4"},r.score),e('td',{className:"py-2 pr-4"},r.percentile),
          e('td',{className:"py-2 pr-0"},r.flagged)))))));
}

function Resources(){
  return e('div',{className:"bg-white rounded-xl p-6 space-y-2"},
    e('div',{className:"text-xl font-bold"},"Resources & Guides"),
    e('ul',{className:"list-disc ml-5 text-sm text-slate-700"},
      e('li',null,"Annexure A — Test Protocols (PDF)"),
      e('li',null,"How-to videos for each test"),
      e('li',null,"Privacy Policy, Terms, Consent Statement"),
      e('li',null,"FAQs, Grievances & Support")));
}

function App(){
  const [section,setSection]=React.useState('home');
  const [authed,setAuthed]=React.useState(!!localStorage.getItem('ath_authed'));
  const [kyc,setKyc]=React.useState(false);
  const [active,setActive]=React.useState(TESTS[3]);
  const [q,setQ]=React.useState('');
  React.useEffect(()=>{if(window.lucide) window.lucide.createIcons();},[section,authed,kyc,q,active]);
  const grid= e('div',null,
    authed && !kyc && e('div',{className:"bg-amber-50 border border-amber-200 text-amber-800 rounded-lg p-4 mb-3"},
      e('div',{className:"font-semibold mb-1"},"Verification required"),
      e('div',{className:"text-sm"},"Complete Aadhaar/KYC to take official tests and appear on the leaderboard."),
      e('div',{className:"mt-2"},e('button',{onClick:()=>setKyc(true),className:"px-3 py-2 rounded-md text-white",style:{background:"#FF6A00"}},"Verify now (demo)")) ),
    e('div',{className:"flex items-center gap-2"},
      e('input',{value:q,onChange:ev=>setQ(ev.target.value),placeholder:"Search tests",className:"bg-white/95 w-48 px-3 py-2 rounded-md"}),
      e('span',{className:"text-white/80 text-sm"},"All 10 tests from Annexure A")),
    e('div',{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4"},
      TESTS.filter(t=>t.name.toLowerCase().includes(q.toLowerCase()))
           .map(t=>e(TestCard,{key:t.id,t,
              start:()=>{ if(!authed) return alert("Please Login/Sign up.");
                          if(!kyc)   return alert("KYC/Aadhaar not verified.");
                          setActive(t); setSection('record'); },
              how:()=>alert("Setup for "+t.name+"\n- "+t.setup.join("\n- "))}))),
    e('div',{className:"mt-4 text-white/80 text-sm flex items-center gap-2"},
      e('i',{'data-lucide':'wifi-off',className:"w-4 h-4"}),"Works offline; pruned+quantized models.")
  );
  return e('div',null,
    e(Nav,{section,setSection,isAuthed:authed,role:'athlete',setRole:()=>{},kyc,setKyc}),
    e('div',{className:"max-w-6xl mx-auto px-4 py-6 space-y-6"},
      section==='home' && e(Hero,{goTests:()=>setSection('tests')}),
      section==='tests' && grid,
      section==='record' && e('div',null,e('div',{className:"text-white font-semibold mb-2"},"Recording — ",e('span',{className:"text-white/90"},active.name)),e(CameraMock,{test:active})),
      section==='results' && e(Results,null),
      section==='leaderboard' && e(Leaderboard,null),
      section==='resources' && e(Resources,null)
    ),
    e('footer',{className:"mt-10 border-t border-white/10"},
      e('div',{className:"max-w-6xl mx-auto px-4 py-8 text-white/80 text-sm grid md:grid-cols-3 gap-4"},
        e('div',null,e('div',{className:"font-bold text-white"},"Ministry of Youth Affairs & Sports"),e('div',null,"Sports Authority of India (SAI)")),
        e('div',null,e('div',{className:"font-bold text-white"},"Useful Links"),e('div',null,"Privacy • Terms • Accessibility • Grievances")),
        e('div',null,e('div',{className:"font-bold text-white"},"Developed by Team Neon"),e('div',null,"© 2025 • All rights reserved"))
      )
    )
  );
}
ReactDOM.createRoot(document.getElementById('root')).render(e(App));
</script>
</body>
</html>
