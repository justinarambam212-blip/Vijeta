<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Vijeta — SAI Officials Portal</title>
<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = { theme: { extend: { colors: { govnavy:"#0A1A3B", govorange:"#FF6A00" } } } };
</script>
<!-- React UMD -->
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<!-- (Optional) Icons -->
<script src="https://unpkg.com/lucide@0.452.0/dist/umd/lucide.min.js"></script>
<style>
  html,body,#root{height:100%}
  body{background:#0A1A3B}
  .hero{position:relative;overflow:hidden;background:linear-gradient(135deg,#0A1A3B,#152a5f)}
  .hero:before{content:"";position:absolute;inset:0;opacity:.28;background:url('https://images.unsplash.com/photo-1517649763962-0c623066013b?q=80&w=1920&auto=format&fit=crop') center/cover}
</style>
</head>
<body>
<noscript style="color:#fff">Please enable JavaScript.</noscript>
<div id="root"></div>

<script>
/* ---- show errors on page so we can debug if anything goes wrong ---- */
window.addEventListener('error', function (e) {
  const box = document.createElement('pre');
  box.style.cssText = "white-space:pre-wrap;color:#fff;background:#7f1d1d;padding:12px;border-radius:8px;max-width:900px;margin:16px auto;font:14px/1.4 ui-monospace,monospace";
  box.textContent = "JS Error: " + e.message;
  document.body.prepend(box);
});

/* ---- React app (simple & robust) ---- */
const e = React.createElement;

function TopBar({ authed, onLogin, onLogout }) {
  return e('div', { className: "sticky top-0 z-50 border-b border-white/10" },
    e('div', { className: "max-w-6xl mx-auto px-4 py-3 flex items-center justify-between", style: { background: "#0A1A3B" } },
      e('div', { className: "text-2xl font-extrabold tracking-widest text-white" }, "VIJETA — Officials"),
      authed
        ? e('button', { onClick: onLogout, className: "px-3 py-2 rounded-md bg-white/10 text-white/90 hover:bg-white/20" }, "Logout")
        : e('button', { onClick: onLogin, className: "px-3 py-2 rounded-md text-white", style: { background: "#FF6A00" } }, "Login")
    )
  );
}

function Hero() {
  return e('div', { className: "hero rounded-3xl shadow-xl text-white relative" },
    e('div', { className: "relative p-8 md:p-12 space-y-4" },
      e('div', { className: "text-4xl md:text-6xl font-extrabold tracking-wider" }, "SAI Officials Portal"),
      e('p', { className: "text-lg md:text-2xl opacity-90" }, "Monitor submissions, review flags, export insights.")
    )
  );
}

function KPIs() {
  const items = [
    ["Total Verified Submissions", "12,584"],
    ["Flags for Review", "312"],
    ["Offline Sync Queue", "1,104"]
  ];
  return e('div', { className: "grid md:grid-cols-3 gap-3 mt-2" },
    items.map(([t, v]) => e('div', { key: t, className: "bg-white rounded-lg p-5" },
      e('div', { className: "text-xs text-slate-600" }, t),
      e('div', { className: "text-3xl font-extrabold" }, v)
    ))
  );
}

function Filters() {
  return e('div', { className: "flex flex-wrap gap-3 bg-white rounded-lg p-4" },
    e('select', { className: "px-3 py-2 rounded-md bg-slate-100" },
      e('option', null, "All States"), e('option', null, "Delhi"), e('option', null, "Maharashtra")),
    e('select', { className: "px-3 py-2 rounded-md bg-slate-100" },
      e('option', null, "All Districts"), e('option', null, "New Delhi"), e('option', null, "Pune")),
    e('select', { className: "px-3 py-2 rounded-md bg-slate-100" },
      e('option', null, "All Age Bands"), e('option', null, "U-12"), e('option', null, "12+")),
    e('select', { className: "px-3 py-2 rounded-md bg-slate-100" },
      e('option', null, "All Genders"), e('option', null, "Male"), e('option', null, "Female")),
    e('input', { placeholder: "Search athlete / ID", className: "px-3 py-2 rounded-md bg-white/95" })
  );
}

function ReviewQueue() {
  const rows = [
    { id: "ATH1234", test: "Vertical Jump", reason: "Speed anomaly", district: "New Delhi", age: "14–15", gender: "M" },
    { id: "ATH7781", test: "Shuttle Run", reason: "Angle wrong", district: "Pune", age: "16–17", gender: "F" },
    { id: "ATH9910", test: "Sit-ups", reason: "Form fail", district: "Bhubaneswar", age: "12–13", gender: "M" }
  ];
  return e('div', { className: "bg-white rounded-xl p-6 mt-4" },
    e('div', { className: "text-xl font-bold mb-3" }, "Review Queue (Flags)"),
    e('div', { className: "overflow-x-auto" },
      e('table', { className: "min-w-full text-sm" },
        e('thead', { className: "text-left text-slate-600" },
          e('tr', null, ["Athlete ID", "Test", "Reason", "District", "Age", "Gender", "Action"]
            .map(h => e('th', { key: h, className: "py-2 pr-4" }, h)))),
        e('tbody', null, rows.map(r => e('tr', { key: r.id },
          e('td', { className: "py-2 pr-4" }, r.id),
          e('td', { className: "py-2 pr-4" }, r.test),
          e('td', { className: "py-2 pr-4" }, r.reason),
          e('td', { className: "py-2 pr-4" }, r.district),
          e('td', { className: "py-2 pr-4" }, r.age),
          e('td', { className: "py-2 pr-4" }, r.gender),
          e('td', { className: "py-2 pr-4" },
            e('button', { className: "px-2 py-1 rounded-md text-white", style: { background: "#FF6A00" },
              onClick: () => alert("Open case " + r.id + " (demo)") }, "Open")
          )
        )))
      )
    )
  );
}

function SecurityNote() {
  return e('div', { className: "text-xs text-white/80 flex items-center gap-2" },
    e('i', { 'data-lucide': 'shield-check', className: "w-4 h-4" }),
    "Ed25519 signatures • Encrypted device queue • HTTPS • Video uploaded only if flagged/opt-in • RBAC"
  );
}

function App() {
  const [authed, setAuthed] = React.useState(!!localStorage.getItem('off_authed'));

  React.useEffect(() => { if (window.lucide) window.lucide.createIcons(); }, [authed]);

  function login()  { localStorage.setItem('off_authed', '1'); location.reload(); }
  function logout() { localStorage.removeItem('off_authed'); location.reload(); }

  return e('div', null,
    e(TopBar, { authed, onLogin: login, onLogout: logout }),
    e('div', { className: "max-w-6xl mx-auto px-4 py-6 space-y-6" },
      e(Hero, null),
      authed
        ? e('div', null, e(KPIs, null), e(Filters, null), e(ReviewQueue, null), e(SecurityNote, null))
        : e('div', { className: "bg-white rounded-xl p-6" }, "Please login to view the dashboard.")
    ),
    e('footer', { className: "mt-10 border-t border-white/10" },
      e('div', { className: "max-w-6xl mx-auto px-4 py-8 text-white/80 text-sm grid md:grid-cols-3 gap-4" },
        e('div', null, e('div', { className: "font-bold text-white" }, "Ministry of Youth Affairs & Sports"),
                        e('div', null, "Sports Authority of India (SAI)")),
        e('div', null, e('div', { className: "font-bold text-white" }, "Official Use Only"), e('div', null, "© 2025")),
        e('div', null, e('div', { className: "font-bold text-white" }, "Developed by Team Neon"))
      )
    )
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(e(App));
</script>
</body>
</html>
